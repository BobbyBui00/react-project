{"ast":null,"code":"var _jsxFileName = \"/Users/bobbybui/Desktop/react-project/src/containers/AdminTemplate/MovieManagement/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport MovieCard from \"./../../../components/MovieCard\";\nimport NavPage from \"./../../../components/NavPages\";\nimport api from \"./../../../api\";\nimport SearchBox from \"../../../components/SearchBox\";\nimport DateSearchInput from \"./../../../components/DateSearchInput\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fetchAllMovieUrl = \"/QuanLyPhim/LayDanhSachPhimPhanTrang?maNhom=GP01\";\nconst fetchDateSearchUrl = \"/QuanLyPhim/LayDanhSachPhimTheoNgay?maNhom=GP01\";\nlet additionDateSearchUrl = \"\";\nlet allMovie = [];\nexport default function MovieManagement() {\n  _s();\n\n  const [movieList, setMovieList] = useState({});\n  const [searchList, setSearchList] = useState([]);\n  const [dateSearch, setDateSearch] = useState({\n    isUsing: false\n  });\n\n  const renderMovieList = () => {\n    const {\n      items\n    } = movieList;\n\n    if (items && items.length > 0) {\n      return items.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-3\",\n          children: /*#__PURE__*/_jsxDEV(MovieCard, {\n            movie: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 7\n          }, this)\n        }, item.maPhim, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 6\n        }, this);\n      });\n    }\n  };\n\n  const handleDateSearch = data => {\n    const setTuKhoa = data.tuKhoa !== \"\" ? `&tenPhim=${data.tuKhoa}` : \"\";\n    additionDateSearchUrl = `${setTuKhoa}&tuNgay=${data.tuNgay}&denNgay=${data.denNgay}`;\n    api.get(`${fetchDateSearchUrl}&soTrang=1&soPhanTuTrenTrang=10000000${additionDateSearchUrl}`).then(res => {\n      const DateSearchNavPage = {\n        count: 8,\n        totalCount: res.data.length,\n        currentPage: 1,\n        totalPages: Math.floor(res.data.length / 8) + 1\n      };\n      api.get(`${fetchDateSearchUrl}&soTrang=1&soPhanTuTrenTrang=8${setTuKhoa}&tuNgay=${data.tuNgay}&denNgay=${data.denNgay}`).then(res => {\n        setMovieList({\n          items: [...res.data],\n          ...DateSearchNavPage,\n          url: fetchDateSearchUrl\n        });\n      }).catch(err => {\n        console.log(err.response.data);\n      });\n    }).catch(err => console.log(err.response.data));\n  };\n\n  const cancelDateSearch = () => {\n    setDateSearch({ ...dateSearch,\n      isUsing: false\n    });\n    api.get(`${fetchAllMovieUrl}&soPhanTuTrenTrang=8&soTrang=1`).then(res => {\n      setMovieList({ ...res.data,\n        url: fetchAllMovieUrl\n      });\n    }).catch(err => {\n      console.log(err.response.data);\n    });\n  };\n\n  const handleSearch = e => {\n    if (e.target.value === \"\") {\n      setSearchList([]);\n    } else {\n      console.log(\"keyword\", e.target.value);\n      console.log(\"searchList\", allMovie);\n      const filteredList = [...allMovie].filter(item => item.tenPhim.toLowerCase().includes(e.target.value));\n      setSearchList(filteredList);\n    }\n  };\n\n  const handleChangePage = currentPage => {\n    const changePageUrl = movieList.url === fetchAllMovieUrl ? `${movieList.url}&soPhanTuTrenTrang=8&soTrang=${currentPage}` : `${movieList.url}&soPhanTuTrenTrang=8&soTrang=${currentPage}${additionDateSearchUrl}`;\n    console.log(changePageUrl);\n\n    if (movieList.url === fetchAllMovieUrl) {\n      api.get(changePageUrl).then(result => {\n        console.log(result.data);\n        setMovieList({ ...result.data,\n          url: movieList.url\n        });\n      }).catch(err => console.log(err));\n    } else {\n      api.get(changePageUrl).then(result => {\n        console.log(result.data);\n        setMovieList({ ...movieList,\n          currentPage,\n          items: [...result.data],\n          url: movieList.url\n        });\n      }).catch(err => console.log(err));\n    }\n  };\n\n  useEffect(() => {\n    api.get(`${fetchAllMovieUrl}&soPhanTuTrenTrang=8&soTrang=1`).then(res => {\n      setMovieList({ ...res.data,\n        url: fetchAllMovieUrl\n      });\n    }).catch(err => {\n      console.log(err.response.data);\n    });\n    api.get(\"/QuanLyPhim/LayDanhSachPhim?maNhom=GP01\").then(res => {\n      allMovie = res.data;\n    }).catch(err => {\n      console.log(err.response.data);\n    });\n  }, []);\n  useEffect(() => {\n    console.log(movieList);\n  }, [movieList]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Movie List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-8\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"movie-form\",\n          onSubmit: e => {\n            e.preventDefault();\n          },\n          children: [!dateSearch.isUsing && /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"search\",\n            type: \"search\",\n            name: \"search\",\n            autoComplete: \"off\",\n            placeholder: \"Search...\",\n            onChange: e => handleSearch(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-warning\",\n            onClick: () => {\n              setDateSearch({ ...dateSearch,\n                isUsing: true\n              });\n            },\n            children: \"Search theo ng\\xE0y th\\xE1ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 7\n          }, this), searchList.length > 0 && /*#__PURE__*/_jsxDEV(SearchBox, {\n            searchList: searchList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 33\n          }, this), dateSearch.isUsing && /*#__PURE__*/_jsxDEV(DateSearchInput, {\n            cancelDateSearch: cancelDateSearch,\n            handleDateSearch: handleDateSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: movieList.items && movieList.items.length > 0 ? renderMovieList() : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"danh s\\xE1ch phim r\\u1ED7ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-12\",\n        children: /*#__PURE__*/_jsxDEV(NavPage, {\n          currentPage: movieList.currentPage,\n          totalPages: movieList.totalPages,\n          count: movieList.count,\n          totalCount: movieList.totalCount,\n          handleChangePage: handleChangePage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 3\n  }, this);\n}\n\n_s(MovieManagement, \"jFYsiEkXDDoNi9QQXay4jklxRE0=\");\n\n_c = MovieManagement;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieManagement\");","map":{"version":3,"sources":["/Users/bobbybui/Desktop/react-project/src/containers/AdminTemplate/MovieManagement/index.js"],"names":["React","useState","useEffect","MovieCard","NavPage","api","SearchBox","DateSearchInput","fetchAllMovieUrl","fetchDateSearchUrl","additionDateSearchUrl","allMovie","MovieManagement","movieList","setMovieList","searchList","setSearchList","dateSearch","setDateSearch","isUsing","renderMovieList","items","length","map","item","maPhim","handleDateSearch","data","setTuKhoa","tuKhoa","tuNgay","denNgay","get","then","res","DateSearchNavPage","count","totalCount","currentPage","totalPages","Math","floor","url","catch","err","console","log","response","cancelDateSearch","handleSearch","e","target","value","filteredList","filter","tenPhim","toLowerCase","includes","handleChangePage","changePageUrl","result","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MovieCard from \"./../../../components/MovieCard\";\nimport NavPage from \"./../../../components/NavPages\";\nimport api from \"./../../../api\";\nimport SearchBox from \"../../../components/SearchBox\";\nimport DateSearchInput from \"./../../../components/DateSearchInput\";\n\nconst fetchAllMovieUrl = \"/QuanLyPhim/LayDanhSachPhimPhanTrang?maNhom=GP01\";\nconst fetchDateSearchUrl = \"/QuanLyPhim/LayDanhSachPhimTheoNgay?maNhom=GP01\";\nlet additionDateSearchUrl = \"\";\n\nlet allMovie = [];\n\nexport default function MovieManagement() {\n\tconst [movieList, setMovieList] = useState({});\n\tconst [searchList, setSearchList] = useState([]);\n\tconst [dateSearch, setDateSearch] = useState({ isUsing: false });\n\n\tconst renderMovieList = () => {\n\t\tconst { items } = movieList;\n\t\tif (items && items.length > 0) {\n\t\t\treturn items.map((item) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={item.maPhim} className=\"col-sm-3\">\n\t\t\t\t\t\t<MovieCard movie={item} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst handleDateSearch = (data) => {\n\t\tconst setTuKhoa = data.tuKhoa !== \"\" ? `&tenPhim=${data.tuKhoa}` : \"\";\n\t\tadditionDateSearchUrl = `${setTuKhoa}&tuNgay=${data.tuNgay}&denNgay=${data.denNgay}`;\n\t\tapi\n\t\t\t.get(\n\t\t\t\t`${fetchDateSearchUrl}&soTrang=1&soPhanTuTrenTrang=10000000${additionDateSearchUrl}`\n\t\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tconst DateSearchNavPage = {\n\t\t\t\t\tcount: 8,\n\t\t\t\t\ttotalCount: res.data.length,\n\t\t\t\t\tcurrentPage: 1,\n\t\t\t\t\ttotalPages: Math.floor(res.data.length / 8) + 1,\n\t\t\t\t};\n\t\t\t\tapi\n\t\t\t\t\t.get(\n\t\t\t\t\t\t`${fetchDateSearchUrl}&soTrang=1&soPhanTuTrenTrang=8${setTuKhoa}&tuNgay=${data.tuNgay}&denNgay=${data.denNgay}`\n\t\t\t\t\t)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tsetMovieList({\n\t\t\t\t\t\t\titems: [...res.data],\n\t\t\t\t\t\t\t...DateSearchNavPage,\n\t\t\t\t\t\t\turl: fetchDateSearchUrl,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.log(err.response.data);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => console.log(err.response.data));\n\t};\n\n\tconst cancelDateSearch = () => {\n\t\tsetDateSearch({ ...dateSearch, isUsing: false });\n\t\tapi\n\t\t\t.get(`${fetchAllMovieUrl}&soPhanTuTrenTrang=8&soTrang=1`)\n\t\t\t.then((res) => {\n\t\t\t\tsetMovieList({ ...res.data, url: fetchAllMovieUrl });\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response.data);\n\t\t\t});\n\t};\n\n\tconst handleSearch = (e) => {\n\t\tif (e.target.value === \"\") {\n\t\t\tsetSearchList([]);\n\t\t} else {\n\t\t\tconsole.log(\"keyword\", e.target.value);\n\t\t\tconsole.log(\"searchList\", allMovie);\n\t\t\tconst filteredList = [...allMovie].filter((item) =>\n\t\t\t\titem.tenPhim.toLowerCase().includes(e.target.value)\n\t\t\t);\n\t\t\tsetSearchList(filteredList);\n\t\t}\n\t};\n\n\tconst handleChangePage = (currentPage) => {\n\t\tconst changePageUrl =\n\t\t\tmovieList.url === fetchAllMovieUrl\n\t\t\t\t? `${movieList.url}&soPhanTuTrenTrang=8&soTrang=${currentPage}`\n\t\t\t\t: `${movieList.url}&soPhanTuTrenTrang=8&soTrang=${currentPage}${additionDateSearchUrl}`;\n\t\tconsole.log(changePageUrl);\n\n\t\tif (movieList.url === fetchAllMovieUrl) {\n\t\t\tapi\n\t\t\t\t.get(changePageUrl)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tconsole.log(result.data);\n\t\t\t\t\tsetMovieList({ ...result.data, url: movieList.url });\n\t\t\t\t})\n\t\t\t\t.catch((err) => console.log(err));\n\t\t} else {\n\t\t\tapi\n\t\t\t\t.get(changePageUrl)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tconsole.log(result.data);\n\t\t\t\t\tsetMovieList({\n\t\t\t\t\t\t...movieList,\n\t\t\t\t\t\tcurrentPage,\n\t\t\t\t\t\titems: [...result.data],\n\t\t\t\t\t\turl: movieList.url,\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tapi\n\t\t\t.get(`${fetchAllMovieUrl}&soPhanTuTrenTrang=8&soTrang=1`)\n\t\t\t.then((res) => {\n\t\t\t\tsetMovieList({ ...res.data, url: fetchAllMovieUrl });\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response.data);\n\t\t\t});\n\t\tapi\n\t\t\t.get(\"/QuanLyPhim/LayDanhSachPhim?maNhom=GP01\")\n\t\t\t.then((res) => {\n\t\t\t\tallMovie = res.data;\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response.data);\n\t\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconsole.log(movieList);\n\t}, [movieList]);\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-sm-4\">\n\t\t\t\t\t<h1>Movie List</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-sm-8\">\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"movie-form\"\n\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!dateSearch.isUsing && (\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"search\"\n\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleSearch(e)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"btn btn-warning\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetDateSearch({ ...dateSearch, isUsing: true });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSearch theo ngày tháng\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{searchList.length > 0 && <SearchBox searchList={searchList} />}\n\t\t\t\t\t\t{dateSearch.isUsing && (\n\t\t\t\t\t\t\t<DateSearchInput\n\t\t\t\t\t\t\t\tcancelDateSearch={cancelDateSearch}\n\t\t\t\t\t\t\t\thandleDateSearch={handleDateSearch}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"row\">\n\t\t\t\t{movieList.items && movieList.items.length > 0 ? (\n\t\t\t\t\trenderMovieList()\n\t\t\t\t) : (\n\t\t\t\t\t<div>danh sách phim rỗng</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-sm-12\">\n\t\t\t\t\t<NavPage\n\t\t\t\t\t\tcurrentPage={movieList.currentPage}\n\t\t\t\t\t\ttotalPages={movieList.totalPages}\n\t\t\t\t\t\tcount={movieList.count}\n\t\t\t\t\t\ttotalCount={movieList.totalCount}\n\t\t\t\t\t\thandleChangePage={handleChangePage}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}