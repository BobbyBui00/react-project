{"ast":null,"code":"var _jsxFileName = \"/Users/bobbybui/Desktop/react-project/src/containers/LoginTemplate/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport api from \"./../../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TIME_EXP = 3600000; //1 hour\n\nexport default function Login() {\n  _s();\n\n  const initialState = {\n    taiKhoan: \"\",\n    matKhau: \"\"\n  };\n  let history = useHistory();\n  const [loginInfo, setLoginInfo] = useState({ ...initialState\n  });\n  const [errData, setErrData] = useState(\"\");\n\n  const renderNoti = () => {\n    if (errData !== \"\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 11\n      }, this);\n    }\n  };\n\n  const handleLogin = e => {\n    e.preventDefault();\n    api.post(\"/QuanLyNguoiDung/DangNhap\", loginInfo).then(result => {\n      if (result.data.maLoaiNguoiDung === \"QuanTri\") {\n        //setHeader Token\n        // setHeaders(result.data.accessToken);\n        //Lưu trạng thái login\n        localStorage.setItem(\"UserAdmin\", JSON.stringify(result.data)); // Redirect qua trang Dashboard\n        // history.replace(\"/dashboard\");\n        //thời gian hết phiên\n\n        const date = new Date().getTime();\n        const exp = date + TIME_EXP;\n        localStorage.setItem(\"exp\", exp); // dispatch(setTimeoutLogout(history, TIME_EXP));\n\n        setErrData(\"\"); // setTimeout(() => {\n        // \tlocalStorage.removeItem(\"UserAdmin\");\n        // \tlocalStorage.removeItem(\"exp\");\n        // \t//chuyen huong ve trang auth\n        // \talert(\"Đã hết phiên đăng nhập, vui lòng đăng nhập lại\");\n        // \thistory.push(\"/login\");\n        // }, TIME_EXP);\n\n        history.push(\"/dashboard\"); // history.replace(\"/dashboard\");\n      } else {\n        setErrData(\"Quyền truy cập không hợp lệ!\");\n      }\n    }).catch(err => {\n      setErrData(err.response.data);\n    });\n  };\n\n  if (localStorage.getItem(\"UserAdmin\")) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/dashboard\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 48\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row login__content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Account Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleLogin,\n          children: [renderNoti(), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"username\",\n              type: \"text\",\n              className: \"form-control\",\n              name: \"taiKhoan\",\n              value: loginInfo.taiKhoan,\n              onChange: e => {\n                setLoginInfo({ ...loginInfo,\n                  taiKhoan: e.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"password\",\n              type: \"password\",\n              className: \"form-control\",\n              name: \"matKhau\",\n              value: loginInfo.matKhau,\n              onChange: e => {\n                setLoginInfo({ ...loginInfo,\n                  matKhau: e.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Login, \"b8qqxzJ0djbl/pwYtSRSFqVwmi4=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/bobbybui/Desktop/react-project/src/containers/LoginTemplate/index.js"],"names":["React","useState","useHistory","Redirect","api","TIME_EXP","Login","initialState","taiKhoan","matKhau","history","loginInfo","setLoginInfo","errData","setErrData","renderNoti","handleLogin","e","preventDefault","post","then","result","data","maLoaiNguoiDung","localStorage","setItem","JSON","stringify","date","Date","getTime","exp","push","catch","err","response","getItem","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport api from \"./../../api\";\n\nconst TIME_EXP = 3600000; //1 hour\n\nexport default function Login() {\n\tconst initialState = {\n\t\ttaiKhoan: \"\",\n\t\tmatKhau: \"\",\n\t};\n\n\tlet history = useHistory();\n\n\tconst [loginInfo, setLoginInfo] = useState({ ...initialState });\n\tconst [errData, setErrData] = useState(\"\");\n\n\tconst renderNoti = () => {\n\t\tif (errData !== \"\") {\n\t\t\treturn <div className=\"alert alert-danger\">{errData}</div>;\n\t\t}\n\t};\n\n\tconst handleLogin = (e) => {\n\t\te.preventDefault();\n\t\tapi\n\t\t\t.post(\"/QuanLyNguoiDung/DangNhap\", loginInfo)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.data.maLoaiNguoiDung === \"QuanTri\") {\n\t\t\t\t\t//setHeader Token\n\t\t\t\t\t// setHeaders(result.data.accessToken);\n\t\t\t\t\t//Lưu trạng thái login\n\t\t\t\t\tlocalStorage.setItem(\"UserAdmin\", JSON.stringify(result.data));\n\t\t\t\t\t// Redirect qua trang Dashboard\n\t\t\t\t\t// history.replace(\"/dashboard\");\n\n\t\t\t\t\t//thời gian hết phiên\n\t\t\t\t\tconst date = new Date().getTime();\n\t\t\t\t\tconst exp = date + TIME_EXP;\n\t\t\t\t\tlocalStorage.setItem(\"exp\", exp);\n\t\t\t\t\t// dispatch(setTimeoutLogout(history, TIME_EXP));\n\t\t\t\t\tsetErrData(\"\");\n\t\t\t\t\t// setTimeout(() => {\n\t\t\t\t\t// \tlocalStorage.removeItem(\"UserAdmin\");\n\t\t\t\t\t// \tlocalStorage.removeItem(\"exp\");\n\t\t\t\t\t// \t//chuyen huong ve trang auth\n\t\t\t\t\t// \talert(\"Đã hết phiên đăng nhập, vui lòng đăng nhập lại\");\n\t\t\t\t\t// \thistory.push(\"/login\");\n\t\t\t\t\t// }, TIME_EXP);\n\t\t\t\t\thistory.push(\"/dashboard\");\n\t\t\t\t\t// history.replace(\"/dashboard\");\n\t\t\t\t} else {\n\t\t\t\t\tsetErrData(\"Quyền truy cập không hợp lệ!\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetErrData(err.response.data);\n\t\t\t});\n\t};\n\n\tif (localStorage.getItem(\"UserAdmin\")) return <Redirect to=\"/dashboard\" />;\n\n\treturn (\n\t\t<section className=\"login\">\n\t\t\t{/* <div className=\"container\"> */}\n\t\t\t<div className=\"row login__content\">\n\t\t\t\t<div className=\"col-md-12 mx-auto\">\n\t\t\t\t\t<h3>Account Login</h3>\n\t\t\t\t\t<form onSubmit={handleLogin}>\n\t\t\t\t\t\t{renderNoti()}\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tplaceholder=\"username\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tname=\"taiKhoan\"\n\t\t\t\t\t\t\t\tvalue={loginInfo.taiKhoan}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetLoginInfo({ ...loginInfo, taiKhoan: e.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tname=\"matKhau\"\n\t\t\t\t\t\t\t\tvalue={loginInfo.matKhau}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetLoginInfo({ ...loginInfo, matKhau: e.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"submit\" className=\"btn\">\n\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{/* </div> */}\n\t\t</section>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}