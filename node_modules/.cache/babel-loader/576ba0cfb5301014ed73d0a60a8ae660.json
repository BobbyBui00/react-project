{"ast":null,"code":"var _jsxFileName = \"/Users/bobbybui/Desktop/react-project/src/containers/AdminTemplate/MovieDetail/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport api from \"./../../../api\";\nimport Moment from \"moment\";\nimport AddNewMovieSchedule from \"../../../components/AddNewMovieSchedule\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovieDetail(props) {\n  _s();\n\n  const history = useHistory();\n  const [movieDetail, setMovieDetail] = useState({});\n  const [editMovie, setEditMovie] = useState({\n    isUsing: false\n  });\n\n  const handleChange = e => {\n    if (e.target.name === \"hinhAnh\") {\n      console.log(e.target);\n      setEditMovie({ ...editMovie,\n        hinhAnh: e.target.files[0]\n      });\n    } else {\n      if (e.target.type === \"ngayKhoiChieu\") {\n        setEditMovie({ ...editMovie,\n          [e.target.name]: Moment(e.target.value).format(\"DD/MM/YYYY\")\n        });\n      } else {\n        setEditMovie({ ...editMovie,\n          [e.target.name]: e.target.value\n        });\n      }\n    }\n  };\n\n  const handleUpdate = () => {\n    let formData = new FormData();\n\n    for (let key in editMovie) {\n      formData.append(key, editMovie[key]);\n    }\n\n    api.post(`/QuanLyPhim/CapNhatPhimUpload`, formData).then(() => {\n      api.get(`/QuanLyPhim/LayThongTinPhim?MaPhim=${props.match.params.id}`).then(res => {\n        alert(\"update thành công!\");\n        setMovieDetail(res.data);\n        setEditMovie({ ...editMovie,\n          isUsing: false\n        });\n      }).catch(err => alert(err.response.data));\n    }).catch(err => alert(err.response.data));\n  };\n\n  const handleEditMovie = () => {\n    setEditMovie({ ...movieDetail,\n      hinhAnh: {},\n      isUsing: !editMovie.isUsing\n    });\n  };\n\n  const renderTable = () => {\n    const {\n      lichChieu\n    } = movieDetail;\n\n    if (lichChieu && lichChieu.length > 0) {\n      return lichChieu.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.thongTinRap.tenCumRap\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.thongTinRap.tenRap\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: new Date(item.ngayChieuGioChieu).toLocaleDateString(\"en-GB\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: new Date(item.ngayChieuGioChieu).toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 7\n          }, this)]\n        }, item.maLichChieu, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 6\n        }, this);\n      });\n    }\n  };\n\n  const handleDeleteMovie = () => {\n    api.delete(`/QuanLyPhim/XoaPhim?MaPhim=${props.match.params.id}`) // .delete(`/QuanLyPhim/XoaPhim`, props.match.params.id)\n    .then(() => {\n      alert(\"xoa thanh cong\");\n      history.push(\"/dashboard/movie\");\n    }).catch(err => {\n      if (err.response) {\n        alert(err.response.data);\n      } else {\n        history.push(\"/dashboard/movie\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    api.get(`/QuanLyPhim/LayThongTinPhim?MaPhim=${props.match.params.id}`).then(res => {\n      setMovieDetail(res.data);\n    }).catch(err => console.log(err.response.data));\n  }, []);\n  useEffect(() => {\n    console.log(editMovie, typeof editMovie.hinhAnh);\n  }, [editMovie]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container movieDetail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"img-fluid\",\n          src: movieDetail && movieDetail.hinhAnh,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 6\n        }, this), editMovie.isUsing && /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"hinhAnh\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDeleteMovie(),\n          className: \"btn btn-danger d-block my-2\",\n          children: \"X\\xF3a Phim\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table\",\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"T\\xEAn Phim\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 9\n              }, this), !editMovie.isUsing ? /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"movie-content\",\n                children: movieDetail && movieDetail.tenPhim\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 10\n              }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  // className=\"my-auto\"\n                  type: \"text\",\n                  name: \"tenPhim\",\n                  value: editMovie.tenPhim,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-warning\",\n                  onClick: handleEditMovie,\n                  children: editMovie.isUsing ? \"Cancel\" : \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"Trailer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 9\n              }, this), !editMovie.isUsing ? /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"movie-content\",\n                children: movieDetail && movieDetail.trailer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 10\n              }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  // className=\"my-auto\"\n                  type: \"text\",\n                  name: \"trailer\",\n                  value: editMovie.trailer,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"M\\xF4 T\\u1EA3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 9\n              }, this), !editMovie.isUsing ? /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"movie-content\",\n                children: movieDetail && movieDetail.moTa\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 10\n              }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  // className=\"my-auto\"\n                  type: \"text\",\n                  name: \"moTa\" // style={{\n                  // \theight: 100 + \"%\",\n                  // }}\n                  ,\n                  value: editMovie.moTa,\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u0110\\xE1nh Gi\\xE1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"movie-content\",\n                children: movieDetail && movieDetail.danhGia\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"Ng\\xE0y Gi\\u1EDD Kh\\u1EDFi Chi\\u1EBFu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"movie-content\",\n                children: movieDetail && Moment(movieDetail.ngayKhoiChieu).format(\"DD/MM/YYYY HH:mm A\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this), editMovie.isUsing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pl-5\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success\",\n            onClick: () => handleUpdate(),\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(AddNewMovieSchedule, {\n      maPhim: props.match.params.id,\n      setMovieDetail: setMovieDetail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-12\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Cum Rap\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ten Rap\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ngay Chieu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Gio Chieu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: renderTable()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 3\n  }, this);\n}\n\n_s(MovieDetail, \"jpkAk4RWeXvQP9sWLUIvvrYiz7o=\", false, function () {\n  return [useHistory];\n});\n\n_c = MovieDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieDetail\");","map":{"version":3,"sources":["/Users/bobbybui/Desktop/react-project/src/containers/AdminTemplate/MovieDetail/index.js"],"names":["React","useEffect","useState","useHistory","api","Moment","AddNewMovieSchedule","MovieDetail","props","history","movieDetail","setMovieDetail","editMovie","setEditMovie","isUsing","handleChange","e","target","name","console","log","hinhAnh","files","type","value","format","handleUpdate","formData","FormData","key","append","post","then","get","match","params","id","res","alert","data","catch","err","response","handleEditMovie","renderTable","lichChieu","length","map","item","thongTinRap","tenCumRap","tenRap","Date","ngayChieuGioChieu","toLocaleDateString","toLocaleTimeString","maLichChieu","handleDeleteMovie","delete","push","tenPhim","trailer","moTa","danhGia","ngayKhoiChieu"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport api from \"./../../../api\";\nimport Moment from \"moment\";\nimport AddNewMovieSchedule from \"../../../components/AddNewMovieSchedule\";\n\nexport default function MovieDetail(props) {\n\tconst history = useHistory();\n\tconst [movieDetail, setMovieDetail] = useState({});\n\tconst [editMovie, setEditMovie] = useState({ isUsing: false });\n\tconst handleChange = (e) => {\n\t\tif (e.target.name === \"hinhAnh\") {\n\t\t\tconsole.log(e.target);\n\t\t\tsetEditMovie({ ...editMovie, hinhAnh: e.target.files[0] });\n\t\t} else {\n\t\t\tif (e.target.type === \"ngayKhoiChieu\") {\n\t\t\t\tsetEditMovie({\n\t\t\t\t\t...editMovie,\n\t\t\t\t\t[e.target.name]: Moment(e.target.value).format(\"DD/MM/YYYY\"),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetEditMovie({ ...editMovie, [e.target.name]: e.target.value });\n\t\t\t}\n\t\t}\n\t};\n\tconst handleUpdate = () => {\n\t\tlet formData = new FormData();\n\t\tfor (let key in editMovie) {\n\t\t\tformData.append(key, editMovie[key]);\n\t\t}\n\t\tapi\n\t\t\t.post(`/QuanLyPhim/CapNhatPhimUpload`, formData)\n\t\t\t.then(() => {\n\t\t\t\tapi\n\t\t\t\t\t.get(`/QuanLyPhim/LayThongTinPhim?MaPhim=${props.match.params.id}`)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\talert(\"update thành công!\");\n\t\t\t\t\t\tsetMovieDetail(res.data);\n\t\t\t\t\t\tsetEditMovie({ ...editMovie, isUsing: false });\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => alert(err.response.data));\n\t\t\t})\n\t\t\t.catch((err) => alert(err.response.data));\n\t};\n\tconst handleEditMovie = () => {\n\t\tsetEditMovie({ ...movieDetail, hinhAnh: {}, isUsing: !editMovie.isUsing });\n\t};\n\tconst renderTable = () => {\n\t\tconst { lichChieu } = movieDetail;\n\t\tif (lichChieu && lichChieu.length > 0) {\n\t\t\treturn lichChieu.map((item) => {\n\t\t\t\treturn (\n\t\t\t\t\t<tr key={item.maLichChieu}>\n\t\t\t\t\t\t<td>{item.thongTinRap.tenCumRap}</td>\n\t\t\t\t\t\t<td>{item.thongTinRap.tenRap}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{new Date(item.ngayChieuGioChieu).toLocaleDateString(\"en-GB\")}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>{new Date(item.ngayChieuGioChieu).toLocaleTimeString()}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\tconst handleDeleteMovie = () => {\n\t\tapi\n\t\t\t.delete(`/QuanLyPhim/XoaPhim?MaPhim=${props.match.params.id}`)\n\t\t\t// .delete(`/QuanLyPhim/XoaPhim`, props.match.params.id)\n\t\t\t.then(() => {\n\t\t\t\talert(\"xoa thanh cong\");\n\t\t\t\thistory.push(\"/dashboard/movie\");\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err.response) {\n\t\t\t\t\talert(err.response.data);\n\t\t\t\t} else {\n\t\t\t\t\thistory.push(\"/dashboard/movie\");\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tapi\n\t\t\t.get(`/QuanLyPhim/LayThongTinPhim?MaPhim=${props.match.params.id}`)\n\t\t\t.then((res) => {\n\t\t\t\tsetMovieDetail(res.data);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err.response.data));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconsole.log(editMovie, typeof editMovie.hinhAnh);\n\t}, [editMovie]);\n\n\treturn (\n\t\t<div className=\"container movieDetail\">\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-sm-4\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"img-fluid\"\n\t\t\t\t\t\tsrc={movieDetail && movieDetail.hinhAnh}\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t/>\n\t\t\t\t\t{editMovie.isUsing && (\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t<input type=\"file\" name=\"hinhAnh\" onChange={handleChange} />\n\t\t\t\t\t\t</form>\n\t\t\t\t\t)}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => handleDeleteMovie()}\n\t\t\t\t\t\tclassName=\"btn btn-danger d-block my-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\tXóa Phim\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-sm-8\">\n\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Tên Phim</td>\n\t\t\t\t\t\t\t\t{!editMovie.isUsing ? (\n\t\t\t\t\t\t\t\t\t<td className=\"movie-content\">\n\t\t\t\t\t\t\t\t\t\t{movieDetail && movieDetail.tenPhim}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t// className=\"my-auto\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"tenPhim\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={editMovie.tenPhim}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-warning\" onClick={handleEditMovie}>\n\t\t\t\t\t\t\t\t\t\t{editMovie.isUsing ? \"Cancel\" : \"Edit\"}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Trailer</td>\n\t\t\t\t\t\t\t\t{!editMovie.isUsing ? (\n\t\t\t\t\t\t\t\t\t<td className=\"movie-content\">\n\t\t\t\t\t\t\t\t\t\t{movieDetail && movieDetail.trailer}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t// className=\"my-auto\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"trailer\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={editMovie.trailer}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Mô Tả</td>\n\t\t\t\t\t\t\t\t{!editMovie.isUsing ? (\n\t\t\t\t\t\t\t\t\t<td className=\"movie-content\">\n\t\t\t\t\t\t\t\t\t\t{movieDetail && movieDetail.moTa}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t// className=\"my-auto\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"moTa\"\n\t\t\t\t\t\t\t\t\t\t\t// style={{\n\t\t\t\t\t\t\t\t\t\t\t// \theight: 100 + \"%\",\n\t\t\t\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={editMovie.moTa}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Đánh Giá</td>\n\t\t\t\t\t\t\t\t<td className=\"movie-content\">\n\t\t\t\t\t\t\t\t\t{movieDetail && movieDetail.danhGia}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Ngày Giờ Khởi Chiếu</td>\n\t\t\t\t\t\t\t\t<td className=\"movie-content\">\n\t\t\t\t\t\t\t\t\t{movieDetail &&\n\t\t\t\t\t\t\t\t\t\tMoment(movieDetail.ngayKhoiChieu).format(\n\t\t\t\t\t\t\t\t\t\t\t\"DD/MM/YYYY HH:mm A\"\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t{editMovie.isUsing && (\n\t\t\t\t\t\t<div className=\"pl-5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success\"\n\t\t\t\t\t\t\t\tonClick={() => handleUpdate()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<AddNewMovieSchedule\n\t\t\t\tmaPhim={props.match.params.id}\n\t\t\t\tsetMovieDetail={setMovieDetail}\n\t\t\t/>\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-sm-12\">\n\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Cum Rap</th>\n\t\t\t\t\t\t\t\t<th>Ten Rap</th>\n\t\t\t\t\t\t\t\t<th>Ngay Chieu</th>\n\t\t\t\t\t\t\t\t<th>Gio Chieu</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>{renderTable()}</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}